---
layout: post
title: "转"
date: 2018-05-13 
description: "letter"
tag: 闲言碎语
---   



最近芝麻二维码的“收款码合并”火了，它能将微信收款码和支付宝收款码合并为一个二维码！听上去感觉很神奇，其实原理非常简单！            

无论是支付宝还是微信的收款码，其本质上是一个包含了收款链接的二维码。所以我们的思路是：检测如果是支付宝浏览页面，就给出支付宝的付款链接、如果是微信，就给出微信链接……             

那么问题来了，如何进行判定呢？             

很好办，根据 UA 就能进行判定了！不懂什么是 UA？请参照 浏览器野史 – UserAgent列传 这篇博文。           

这部分的代码如下：            

if(navigator.userAgent.match(/Alipay/i)) {
    // 支付宝
} else if(navigator.userAgent.match(/MicroMessenger\//i)) {
    // 微信
} else if(navigator.userAgent.match(/QQ\//i)) {
    // QQ
} else {
    // 其它
}
理论上来说，进行判定后直接给跳转到对应的收款页面就行了，然而实际测试发现在QQ和微信中并不能直接调用付款功能，只有支付宝能直接进行付款。         

这里就只能用一个折中的办法：如果是QQ或微信扫的码，就再放出一个二维码的界面，让用户通过长按识别二维码进入支付流程。          

最终完成的效果如下：       
多合一收款二维码原理及实现(源码)           

你可以用 QQ 或是微信或是支付宝中的任意一个扫描这个二维码进行测试(当然如果还打个款就再好不过了，哈哈哈哈…… 憨笑 )           

成品源码下载(单文件纯 html 实现，需上传至网站空间使用)：         

 百度网盘 蓝奏云 城通网盘 永硕E盘
注：请将代码中第 19、22、25行中的收款链接改为自己的。            

请用专门的 Html 编辑器(如 notepad++)进行编辑，切勿直接用记事本编辑，否则可能出现中文乱码！           

收款链接获取方法           

以下以微信为例，QQ、支付宝的获取方法类似。          

打开微信，点击右上角>收付款        
多合一收款二维码原理及实现(源码)          
     
找到“二维码收款”     
多合一收款二维码原理及实现(源码)        

将得到的收款二维码保存(截图)          
多合一收款二维码原理及实现(源码)          

用二维码识别工具(如 https://cli.im/deqr/) 上传二维码图片并获取到二维码中的收款链接。        

多合一收款二维码原理及实现(源码)           

将获取到的收款链接粘贴并替换源码中的链接即可。        
多合一收款二维码原理及实现(源码)     

本文作者为mengkun，转载请注明。      

![上网][1]
<br>
  以前是知道有翻墙这么个东西，总感觉天朝的网络世界已经够我遨游了，而且处处是一片祥和，所以就觉得墙内挺好，也就懒得架梯子翻墙了，但最近时不时的要上网查点技术资料，有的时候需要频繁的访问国外的一些网站，可在天朝是不能随随便便访问外网的。搜索一番，在无意中发现了[SihuaCloud][4]这个网站。免费使用了一下感觉各方面都很满意，网速很快很稳定，不过免费的有各种不尽人意的地方，比如什么定时断网、流量限制、时间限制什么的，用起来各种不爽，于是索性就买了一年的会员。接下来就是使用它了，这段时间一直在用。        
<br>
  我一直认为，使用vpn 本身并没有错误，大多数用vpn的人是想使用国外的服务，facebook twitter youtube google 等等，这些做的比国内好许多产品，只是因为政治上的原因而禁止进入中国，身处大陆地区的网民才只好用vpn这种工具翻墙。         
<br>
  如果大家有更好的方案，可以一起探讨一下。(∩_∩) (^o^)/~            
<br>
  
<p style="color: #FF2D2D">
<strong>推荐大家使用付费的，包年包月也花不了几个钱，用着也省心</strong></p>     

<!--| VPN服务商| 特点   |  月/价格  |官方网站  |
| :---:  | :----:  | :---:  | :---:  |
| Loco加速器   |  快速、稳定，支持所有设备，随时随地使用 |  ¥15  |  [点此进入][4]     |
| 流星加速器    |    无限流量，国内外节点，全部地域可用    |  ¥20 |  [点此进入][5]     |
| 赤兔加速器    |    一群有理想、无节操的青年们的诚意之作    |  ¥20 |  [点此进入][6]     |
| 豆荚VPN    |    轻便、客户端体积小，不与其他进程抢占CPU使用率 |  ¥20 |  [点此进入][7]     |
| 灰熊加速器    |    新用户注册即送1G 高速流量，不限带宽连接服务器    |  ¥20 |  [点此进入][8]     |
| 泰坦加速器    |  免费试用、多平台支持、快速稳定、数据加密 |  ¥25 |  [点此进入][9]     |
| GreenVPN    |  老牌VPN、快速、稳定的网络优化服务、售后很好 |  ¥18 |  [点此进入][10]     |
| 天行VPN    |  老牌VPN、提供世界各地VPN代理服务器，低延时、高稳定性 |  ¥20 |  [点此进入][11]     |-->


<a href="https://i.sihua.me/?u=9831"><img style="border: 0px" src="http://omjh2j5h3.bkt.clouddn.com/image/Google%20earth.png"/></a>        


  自从翻墙以来，感觉是发现了新大陆！最近发现谷歌地球是相当...用一个词形容那就是“惊艳”，玩了一下午简直停不下来，当查看天朝的时候，发现并没有给任何一个城市建模（反正截止目前没得），这也难怪，与世隔绝嘛，大家都懂。           
<br>
  墙外的世界是如此美好，先让我呼吸下新鲜空气先\(^o^)/~             

----------
> 如果注定要一个人赶路，那就此告别吧，大漠孤烟，夕阳西下。再喝最后一碗酒，然后我就出发。不必挽留，无需相送。今日一别，来世再见。若他们问起我，就说我是尘世的一粒沙，本该浪迹天涯……
——来自《网易云音乐》


<br>

  [1]: http://omjh2j5h3.bkt.clouddn.com/image/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91.png
 
  [4]: https://i.sihua.me/?u=9831
  [5]: http://t.cn/R65FtK1
  [6]: http://cht.li/nlb75
  [7]: http://doujia.gs/4umn9
  [8]: http://g46.net/qyjqq
  [9]: http://42v.net/ymree
  [10]: http://gjsq.me/30438734
  [11]: http://go.tianxingvpn.top/?r=28008
  [12]: http://omjh2j5h3.bkt.clouddn.com/image/Google%20earth.png
